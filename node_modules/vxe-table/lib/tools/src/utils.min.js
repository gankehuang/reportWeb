"use strict";Object.defineProperty(exports,"__esModule",{value:!0}),exports.default=exports.UtilTools=void 0;var _xeUtils=_interopRequireDefault(require("xe-utils/methods/xe-utils")),_conf=_interopRequireDefault(require("../../conf"));function _interopRequireDefault(e){return e&&e.__esModule?e:{default:e}}function _classCallCheck(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var l=0;l<t.length;l++){var n=t[l];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _createClass(e,t,l){return t&&_defineProperties(e.prototype,t),l&&_defineProperties(e,l),e}var zindexIndex=0,lastZindex=0,columnUniqueId=0,ColumnConfig=function(){function i(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{},l=t.renderHeader,n=t.renderCell,r=t.renderData;_classCallCheck(this,i),e.cellRender&&e.editRender&&UtilTools.warn("vxe.error.cellEditRender"),"selection"===e.type&&UtilTools.warn("vxe.error.delProp",["selection","checkbox"]),Object.assign(this,{id:"col_".concat(++columnUniqueId),type:e.type,prop:e.prop,property:e.field||e.prop,title:e.title,label:e.label,width:e.width,minWidth:e.minWidth,resizable:e.resizable,fixed:e.fixed,align:e.align,headerAlign:e.headerAlign,footerAlign:e.footerAlign,showOverflow:e.showOverflow,showHeaderOverflow:e.showHeaderOverflow,className:e.class||e.className,headerClassName:e.headerClassName,footerClassName:e.footerClassName,indexMethod:e.indexMethod,formatter:e.formatter,sortable:e.sortable,sortBy:e.sortBy,sortMethod:e.sortMethod,remoteSort:e.remoteSort,filters:UtilTools.getFilters(e.filters),filterMultiple:!_xeUtils.default.isBoolean(e.filterMultiple)||e.filterMultiple,filterMethod:e.filterMethod,filterRender:e.filterRender,treeNode:e.treeNode,cellRender:e.cellRender,editRender:e.editRender,checked:!1,params:e.params,visible:!0,level:1,rowSpan:1,colSpan:1,order:null,renderWidth:0,renderHeight:0,resizeWidth:0,renderLeft:0,model:{},renderHeader:l||e.renderHeader,renderCell:n||e.renderCell,renderData:r,slots:e.slots,own:e})}return _createClass(i,[{key:"getTitle",value:function(){return UtilTools.getFuncText(this.own.title||this.own.label||("index"===this.type?_conf.default.i18n("vxe.column.indexTitle"):""))}},{key:"update",value:function(e,t){["filters"].includes(e)||(this[e]=t)}}]),i}();function outLog(n){return function(e,t){var l=UtilTools.getLog(e,t);return console[n](l),l}}var UtilTools={warn:outLog("warn"),error:outLog("error"),getLog:function(e,t){return"[vxe-table] ".concat(_xeUtils.default.template(_conf.default.i18n(e),t))},getSize:function(e){var t=e.size,l=e.$parent;return t||(l&&-1<["medium","small","mini"].indexOf(l.size)?l.size:null)},getFuncText:function(e){return _xeUtils.default.isFunction(e)?e():_conf.default.translate?_conf.default.translate(e):e},nextZIndex:function(e){return e&&e.zIndex?e.zIndex:lastZindex=_conf.default.zIndex+zindexIndex++},getLastZIndex:function(){return lastZindex},getRowkey:function(e){return e.rowId},getRowid:function(e,t){var l=_xeUtils.default.get(t,UtilTools.getRowkey(e));return l?encodeURIComponent(l):""},emitEvent:function(e,t,l){e.$listeners[t]&&e.$emit.apply(e,[t].concat(l))},getColumnList:function(e){var t=[];return e.forEach(function(e){t.push.apply(t,e.children&&e.children.length?UtilTools.getColumnList(e.children):[e])}),t},getClass:function(e,t){return e?_xeUtils.default.isFunction(e)?e(t):e:""},getFilters:function(e){return(e||[]).map(function(e){var t=e.label,l=e.value,n=e.data;return{label:t,value:l,data:n,_data:n,checked:!!e.checked}})},formatText:function(e,t){return""+(null==e?t?_conf.default.emptyCell:"":e)},getCellValue:function(e,t){return _xeUtils.default.get(e,t.property)},getCellLabel:function(e,t,l){var n=t.formatter,r=UtilTools.getCellValue(e,t),i=r;if(l&&n){var o,a,u=l.$table,s=t.id;if(u&&u.fullAllDataRowMap.has(e)&&((a=(o=u.fullAllDataRowMap.get(e)).formatData)||(a=u.fullAllDataRowMap.get(e).formatData={})),o&&a[s]&&a[s].value===r)return a[s].label;i=_xeUtils.default.isString(n)?_xeUtils.default[n](r):_xeUtils.default.isArray(n)?_xeUtils.default[n[0]].apply(_xeUtils.default,[r].concat(n.slice(1))):n(Object.assign({cellValue:r},l)),a&&(a[s]={value:r,label:i})}return i},setCellValue:function(e,t,l){return _xeUtils.default.set(e,t.property,l)},getColumnConfig:function(e,t){return e instanceof ColumnConfig?e:new ColumnConfig(e,t)},assemColumn:function(e){var t=e.$table,l=e.$column,n=e.columnConfig,r=l?l.columnConfig:null;n.slots=e.$scopedSlots,r&&0<l.$children.length?(r.children||(r.children=[]),r.children.splice([].indexOf.call(l.$el.children,e.$el),0,n)):t.collectColumn.splice([].indexOf.call(t.$refs.hideColumn.children,e.$el),0,n)},destroyColumn:function(e){var t=e.$table,l=e.columnConfig,n=_xeUtils.default.findTree(t.collectColumn,function(e){return e===l});n&&n.items.splice(n.index,1)},hasChildrenList:function(e){return e&&e.children&&0<e.children.length},parseFile:function(e){var t=e.name,l=_xeUtils.default.lastIndexOf(t,"."),n=t.substring(l+1,t.length);return{filename:t.substring(0,l),type:n}}},_default=exports.UtilTools=UtilTools;exports.default=_default;